mybatis_suser.xml{% extends 'layout.html' %}
<meta charset="UTF-8">
{% block content %}
<script>
	function setData(survey_id, s_seq, st_mobile, answer, in_date, update_id, in_user_id, up_user_id) {
		alert("ok");
		$("#survey_id").val(survey_id);
		$("#s_seq").val(s_seq);
		$("#st_mobile").val(st_mobile);
		$("#answer").val(answer);
		$("#in_date").val(in_date);
		$("#up_date").val(up_date);
		$("#in_user_id").val(in_user_id);
		$("#up_user_id").val(up_user_id);
	}

	function fn_add() {
		var survey_id = $("#survey_id").val();
		var s_seq = $("#s_seq").val();
		var st_mobile = $("#st_mobile").val();
		var answer = $("#answer").val();
		var in_date = $("#in_date").val();
		var update_id = $("#update_id").val();
		var in_user_id = $("#in_user_id").val();
		var up_user_id = $("#up_user_id").val();
		var param = "";
		param += "dummy=" + Math.random();
		param += "&survey_id=" + survey_id;
		param += "&s_seq=" + s_seq;
		param += "&st_mobile=" + st_mobile;
		param += "&answer=" + answer;
		param += "&in_date=" + in_date;
		param += "&update_id=" + update_id;
		param += "&in_user_id=" + in_user_id;
		param += "&up_user_id=" + up_user_id;

		$.ajax({
			url : "sresult_ins.ajax",
			data : param,
			dataType : "json",
			type : "post",
			async : false,
			statusCode : {
				404 : function() {
					alert("네트워크가 불안정합니다. 다시 시도부탁드립니다.");
				}
			},
			success : function(data) {
				if (data.msg == "ok") {
					location.reload();
				} else {
					alert("추가도중 문제가 생겼습니다.");
				}
				console.log(data.msg)
			}
		});
	}

	function fn_upd() {
		var survey_id = $("#survey_id").val();
		var s_seq = $("#s_seq").val();
		var st_mobile = $("#st_mobile").val();
		var answer = $("#answer").val();
		var in_date = $("#in_date").val();
		var update_id = $("#update_id").val();
		var in_user_id = $("#in_user_id").val();
		var up_user_id = $("#up_user_id").val();
		var param = "";
		param += "dummy=" + Math.random();
		param += "&survey_id=" + survey_id;
		param += "&s_seq=" + s_seq;
		param += "&st_mobile=" + st_mobile;
		param += "&answer=" + answer;
		param += "&in_date=" + in_date;
		param += "&update_id=" + update_id;
		param += "&in_user_id=" + in_user_id;
		param += "&up_user_id=" + up_user_id;

		$.ajax({
			url : "sresult_upd.ajax",
			data : param,
			dataType : "json",
			type : "post",
			async : false,
			statusCode : {
				404 : function() {
					alert("네트워크가 불안정합니다. 다시 시도부탁드립니다.");
				}
			},
			success : function(data) {
				if (data.msg == "ok") {
					location.reload();
				} else {
					alert("수정도중 문제가 생겼습니다.");
				}
				console.log(data.msg)
			}
		});
	}

	function fn_del() {
		var survey_id = $("#survey_id").val();
		var s_seq = $("#s_seq").val();
		var param = "";
		param += "dummy=" + Math.random();
		param += "&survey_id=" + survey_id;
		param += "&s_seq=" + s_seq;

		$.ajax({
			url : "sresult_del.ajax",
			data : param,
			dataType : "json",
			type : "post",
			async : false,
			statusCode : {
				404 : function() {
					alert("네트워크가 불안정합니다. 다시 시도부탁드립니다.");
				}
			},
			success : function(data) {
				if (data.msg == "ok") {
					location.reload();
				} else {
					alert("삭제도중 문제가 생겼습니다.");
				}
				console.log(data.msg)
			}
		});
	}
</script>
<table>
	<tr>
		<td>
			<table border="1px">
				<tr>
					<td>survey_id</td>
					<td>s_seq</td>
					<td>st_mobile</td>
					<td>answer</td>
					<td>in_date</td>
					<td>update_id</td>
					<td>in_user_id</td>
					<td>up_user_id</td>
				</tr>

				{% for s in list %}
				<tr>
					<td><a
						href="javascript:setData('{{s.survey_id}}','{{s.s_seq}}','{{s.st_mobile}}','{{s.answer}}','{{s.in_date}}','{{s.update_id}}','{{s.in_user_id}}','{{s.up_user_id}}')">{{s.survey_id}}</a></td>
					<td>{{s.s_seq}}</td>
					<td>{{s.st_mobile}}</td>
					<td>{{s.answer}}</td>
					<td>{{s.in_date}}</td>
					<td>{{s.update_id}}</td>
					<td>{{s.in_user_id}}</td>
					<td>{{s.up_user_id}}</td>
				</tr>
				{% endfor%}
			</table>
		</td>
	</tr>
</table>
<table border="1">
	<tr>
		<td><input type="text" id="survey_id" /></td>
	</tr>
	<tr>
		<td>s_seq</td>
		<td><input type="password" id="s_seq"></td>
	</tr>
	<tr>
		<td>st_mobile</td>
		<td><input type="text" id="st_mobile"></td>
	</tr>
	<tr>
		<td>answer</td>
		<td><input type="text" id="answer"></td>
	</tr>
	<tr>
		<td>in_date</td>
		<td><input type="text" id="in_date"></td>
	</tr>
	<tr>
		<td>update_id</td>
		<td><input type="text" id="update_id"></td>
	</tr>
	<tr>
		<td>in_user_id</td>
		<td><input type="text" id="in_user_id"></td>
	</tr>
	<tr>
		<td>up_user_id</td>
		<td><input type="text" id="up_user_id"></td>
	</tr>

	<tr>
		<td colspan="2"><input type="button" value="추가"
			onclick="fn_add()"> <input type="button" value="수정"
			onclick="fn_upd()"> <input type="button" value="삭제"
			onclick="fn_del()"></td>
	</tr>
</table>
{% endblock %}
